# 008-配置文件使用

## 一、properties配置文件使用

在resources目录下新建application.properties文件。

springboot程序在启动时会自动读取名为application.properties的文件并读取配置。

```python
server.port=8888
server.servlet.context-path=/start
```

- port：服务端口
- context-path：服务根路径

更多配置项可以查看springboot官方文档

修改配置文件后启动程序，发现需要在浏览器输入127.0.0.1:8888/start/test才能访问测试类。

## 二、yaml/yml配置文件使用

将application.properties文件改名为application.properties.bak，同时创建application.yaml文件。

```yaml
server:
  port: 8888
  servlet:
    context-path: /start
```

重新启动程序，在浏览器输入127.0.0.1:8888/start/test同样可以访问测试类。



## 三、自定义配置和读取

实际开发中会根据项目需求配置多项自定义配置，yaml文件中可以添加自定义的配置项并在程序中获取。

在程序中可以通过@Value("${键名}")和@ConfigurationPropertie(prefix="前缀")来获取自定义配置项。

该部分内容课堂演示，学生操作后续课堂进行。

在application.yaml文件中插入自定义配置项

```yaml
test:
  username: tom
  password: 1234
```

service新建TestService接口

```java
public interface TestService {
    String test();
}
```

service.impl新建TestServiceImpl.java

```java
@Service
public class TestServiceImpl implements TestService {

    @Resource
    private Test test;

    @Override
    public String test() {
        return test.getUsername() + "----" + test.getPassword();
    }
}
```

pojo新建Test类

```java
@Component
@ConfigurationProperties(prefix = "test")
public class Test {
//    @Value("${test.username}")
    private String username;
//    @Value("${test.password}")
    private String password;

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    @Override
    public String toString() {
        return "User{" +
                "username='" + username + '\'' +
                ", password='" + password + '\'' +
                '}';
    }
}
```

controller.TestController中添加测试方法

```java
    @GetMapping("/yaml")
    public String yaml() {
        return testService.test();
    }
```

