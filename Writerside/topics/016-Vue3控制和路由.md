# 016-Vue3控制和路由

## 循环与判断

```
<script setup lang="ts">

import {reactive} from "vue";

let list = reactive(['a', 'b', 'c']);
let obj = reactive({
  'name': 'zhangsan',
  'age': 20,
  'gender': 0
});



</script>

<template>
  <h1>不带索引的循环</h1>
  <div v-for="item in list">
     {{ item }}
  </div>
  <hr>
  <h1>带索引的循环</h1>
  <div v-for="(item, index) in list" :key="index">
  {{ index }} -- {{ item }}
  </div>
  <hr>
  <h1>遍历对象</h1>
  <div v-for="(value, key) in obj" :key="key">
     {{ key }} -- {{ value }}
  </div>
  <hr>
  <h1>if判断</h1>
  <div v-if="obj.gender == 1">
    男
  </div>
  <div v-else>
    女
  </div>


</template>

<style scoped>

</style>

```

## 组件

在components目录下新建Test.vue文件，创建一个组件，写入以下内容

```
<script setup lang="ts">
// 接受父组件传参
const props = defineProps({
  msg: String,
})

</script>

<template>
  <div>
    我来自{{ props.msg }}
  </div>
</template>

<style scoped>

</style>
```

在App.vue文件中写入以下内容

```
<script setup lang="ts">
import Test from "./components/Test.vue";

const msg = '江西应用'
</script>

<template>
  <Test :msg='msg'/>
</template>

<style scoped>

</style>

```

启动程序后在页面可以看到

![image-20241006012033166](./assets/image-20241006012033166.png)

简单的通过组件来构建页面并在组件之间传递参数。

## 路由

Vue Router 是 Vue.js 官方提供的路由管理器，用于实现前端路由。它的主要作用是在单页面应用（SPA）中，通过管理 URL 和组件之间的映射关系，实现页面之间的切换和导航

### 安装

```shell
npm install vue-router
```

### 路由配置模板

src目录下新建**router**目录，在目录内新建**index.ts**文件。

路由配置模板**index.ts**如下

```typescript
import {createRouter, createWebHistory} from "vue-router";
import Home from "../components/Home.vue";
import Child1 from "../components/Child1.vue";
import Child2 from "../components/Child2.vue";

const routes = [
    {
        path: '/',    // 访问路径
        name: 'home', // 路由名称
        component: Home,  // 路由组件
        // 子路由
        children: [
            {
                path: '/child-01',    // 访问路径
                name: 'child-01', // 路由名称
                component: Child1,  // 路由组件
            },
            {
                path: '/child-02',    // 访问路径
                name: 'child-02', // 路由名称
                component: Child2,  // 路由组件
            }
        ]
    }
]

const router = createRouter({
    // 路由模式，分为WebHistory和HashWebHistory两种
    history: createWebHistory(import.meta.env.BASE_URL),
    routes: routes
})

export default router
```

### 路由引用

在**main.ts**中引用vue-router

```typescript
import './style.css'
import App from './App.vue'
import router from "./router";
import {createApp} from "vue";

const app = createApp(App)

// 在项目中引入vue-router
app.use(router)  

app.mount('#app')
```

### 测试

由于配置的路由是根路由(/)，我们直接在App.vue文件中引入路由进行测试

**App.vue**文件内容如下

```
<script setup lang="ts">

</script>

<template>
  <RouterView></RouterView>
</template>

<style scoped>

</style>


```

此时我们还缺少在index.ts中声明了的component组件。

在components目录下新建**Home.vue**文件，内容如下：

```
<script setup lang="ts">

</script>

<template>
  <h1>Vue-Router测试</h1>
    <RouterLink to="/child-01">第一个子路由</RouterLink>
  <br>
  <br>
    <RouterLink to="/child-02">第二个子路由</RouterLink>
  <hr>
  <div>
    <RouterView/>
  </div>
</template>

<style scoped>

</style>
```

在components目录下新建**Child1.vue**文件，内容如下：

```
<script setup lang="ts">

</script>

<template>
  第一个子路由
</template>

<style scoped>

</style>
```

在components目录下新建**Child2.vue**文件，内容如下：

```
<script setup lang="ts">

</script>

<template>
  第二个子路由
</template>

<style scoped>

</style>
```

启动项目打开页面进行测试
